// Generated by CoffeeScript 1.8.0
(function() {
  var Devices, Promise, promisify;

  Promise = require('bluebird');

  promisify = Promise.promisify;

  module.exports = Devices = (function() {
    function Devices(_arg) {
      var client, resource;
      resource = _arg.resource, client = _arg.client;
      this.resource = resource;
      this.client = client;
    }

    Devices.prototype.create = function(_arg) {
      var name, params, redirect_uri, rsrc;
      name = _arg.name, redirect_uri = _arg.redirect_uri;
      params = {
        name: name
      };
      if (redirect_uri) {
        params.redirect_uri = redirect_uri;
      }
      rsrc = this.resource;
      rsrc.create = promisify(rsrc.create);
      return rsrc.create(params).then(function(authRequestResource) {
        return {
          device_token: authRequestResource.metadata.device_token,
          mfa_uri: authRequestResource.mfa_uri
        };
      })["catch"](function(error) {
        throw new Error(error);
      });
    };

    return Devices;

  })();

}).call(this);
