// Generated by CoffeeScript 1.8.0
(function() {
  var User, Wallets;

  Wallets = require('./wallets');

  module.exports = User = (function() {
    function User(resource, client, options) {
      this.client = function() {
        return client;
      };
      this.resource = function() {
        return resource;
      };
      this.email = resource.email, this.url = resource.url, this.first_name = resource.first_name, this.last_name = resource.last_name, this.user_token = resource.user_token, this.applications = resource.applications, this.default_wallet = resource.default_wallet, this.subscriptions = resource.subscriptions;
    }

    User.prototype.wallets = function(callback) {
      var resource, wallets;
      if (this._wallets) {
        return callback(null, this._wallets);
      }
      resource = this.resource().wallets;
      wallets = new Wallets(resource, this.client());
      return wallets.loadCollection((function(_this) {
        return function(error, wallets) {
          if (error) {
            return callback(error);
          }
          _this._wallets = wallets;
          return callback(null, _this._wallets);
        };
      })(this));
    };

    User.prototype.update = function(content, callback) {
      return this.resource().update(content, (function(_this) {
        return function(error, resource) {
          var email;
          if (error) {
            return callback(error);
          }
          _this.resource = function() {
            return resource;
          };
          email = resource.email, _this.first_name = resource.first_name, _this.last_name = resource.last_name;
          return callback(null, _this);
        };
      })(this));
    };

    return User;

  })();

}).call(this);
